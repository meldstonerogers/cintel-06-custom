<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banana Quality Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/shinylive@0.2.2/shinylive.css" rel="stylesheet">
</head>
<body>
    <div id="error-display" style="color: red; font-weight: bold;"></div>
    <div id="shinylive-app"></div>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/shinylive@0.2.2/shinylive.js"></script>
    <script type="text/javascript">
        const BACKEND = 'https://shinylive.io/v2/editor/';
        const CODE = `
# Explicit imports for debugging
import sys
import os

# Print current working directory and Python version for debugging
print(f"Python version: {sys.version}")
print(f"Current working directory: {os.getcwd()}")

try:
    import pandas as pd
    import plotly.express as px
    from faicons import icon_svg
    import shiny
    from shiny.express import input, render, ui
    from shinywidgets import render_widget
    from shiny import reactive
except ImportError as e:
    print(f"Import Error: {e}")
    raise

# Read CSV with error handling
try:
    # Use relative path or ensure CSV is in same directory
    bananas_df = pd.read_csv("banana_quality_dataset.csv")
    print(f"CSV loaded successfully. Shape: {bananas_df.shape}")
except Exception as e:
    print(f"Error loading CSV: {e}")
    raise

# Rest of your app code remains the same as previous submission
# ... [previous app code] ...

# Add extra error logging
print("Shiny app definition complete.")
`;
        
        // Enhanced error handling
        try {
            const runtime = new shinylive.ShinyLiveRuntime(
                document.getElementById('shinylive-app'), 
                BACKEND, 
                {'main.py': CODE}
            );
            runtime.run();
        } catch (error) {
            console.error("Shinylive Runtime Error:", error);
            document.getElementById('error-display').textContent = 
                `Error initializing app: ${error.message}`;
        }
    </script>
</body>
</html>